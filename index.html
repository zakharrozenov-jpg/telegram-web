<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>CS:GO –ö–µ–π—Å—ã</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root{
  --accent:#f39c12;
  --bg1:#2c3e50;
  --bg2:#0f1419;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:Arial, sans-serif;
  background:radial-gradient(circle at top, var(--bg1), var(--bg2));
  color:#fff; text-align:center; padding-top:80px;
}
h1{color:var(--accent)}

#topBar{
  position:fixed; top:10px; right:12px; z-index:10;
  display:flex; gap:6px; align-items:center; flex-wrap:wrap;
}
#balance{color:#2ecc71; font-weight:bold}

button{
  background:linear-gradient(135deg,#f39c12,#e67e22);
  border:none; border-radius:12px; padding:10px 16px;
  cursor:pointer; font-weight:bold; transition:.2s;
}
button:hover{transform:scale(1.05)}
button:active{transform:scale(.98)}

.case{
  background:linear-gradient(145deg,#2c3e50,#1a252f);
  width:min(92vw,420px); margin:16px auto; padding:16px;
  border-radius:18px; display:flex; justify-content:space-between;
  align-items:center; cursor:pointer;
  box-shadow:0 0 25px rgba(243,156,18,.15);
  transition:.25s;
}
.case:hover{transform:scale(1.04); box-shadow:0 0 35px rgba(243,156,18,.35)}

#overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.88);
  display:none; align-items:center; justify-content:center; z-index:100;
  animation:fadeIn .3s;
}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

#rouletteModal{
  background:#121820; width:min(94vw,520px);
  padding:20px; border-radius:22px;
  box-shadow:0 0 40px rgba(0,0,0,.8);
  animation:zoomIn .3s ease-out;
}
@keyframes zoomIn{from{transform:scale(.7)}to{transform:scale(1)}}

.roulette{
  width:100%; height:110px; overflow:hidden;
  border:2px solid var(--accent); border-radius:14px;
  margin-top:16px; position:relative;
}
.roulette::after{
  content:''; position:absolute; left:50%; top:0; width:2px; height:100%;
  background:var(--accent); box-shadow:0 0 10px var(--accent);
}
.roulette-track{display:flex; position:relative; left:0}
.roulette-item{
  min-width:120px; padding:10px; font-size:.75em; opacity:.9;
}

.result{margin-top:14px; font-size:1.25em; min-height:40px}

/* RARITY */
.common{color:#fff}
.rare{color:#1e90ff}
.epic{color:#a020f0; text-shadow:0 0 10px rgba(160,32,240,.6)}
.legendary{
  color:#ffa500;
  text-shadow:0 0 14px rgba(255,165,0,.9), 0 0 28px rgba(255,165,0,.6);
  animation:pulse 1.2s infinite alternate;
}
@keyframes pulse{from{transform:scale(1)}to{transform:scale(1.06)}}

.shake{animation:shake .5s}
@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-4px)}
  50%{transform:translateX(4px)}
  75%{transform:translateX(-2px)}
  100%{transform:translateX(0)}
}

@media (max-width:420px){
  .roulette{height:96px}
  .roulette-item{min-width:104px}
}
</style>
</head>

<body>

<div id="topBar">
  <div id="balance">–ë–∞–ª–∞–Ω—Å: 500 üí∞</div>
  <button onclick="topUp()">‚ûï –ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
</div>

<h1>CS:GO –ö–µ–π—Å—ã</h1>
<div id="casesContainer"></div>

<div id="overlay">
  <div id="rouletteModal">
    <h2 id="caseTitle"></h2>
    <div class="roulette"><div id="rouletteTrack" class="roulette-track"></div></div>
    <div class="result" id="result"></div>
    <button onclick="closeRoulette()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<audio id="spinSound" src="https://www.myinstants.com/media/sounds/coin-drop-4.mp3"></audio>
<audio id="dropSound" src="https://www.myinstants.com/media/sounds/box_open.mp3"></audio>

<script>
const tg = Telegram.WebApp; tg.ready(); tg.expand();

/* BALANCE */
let balance = 500;
const balanceEl = document.getElementById('balance');
function updateBalance(){ balanceEl.textContent = `–ë–∞–ª–∞–Ω—Å: ${balance} üí∞`; }
updateBalance();

/* CASES */
const cases = [
  {name:'Snakebite Case', price:25},
  {name:'Dreams & Nightmares', price:75},
  {name:'Gamma Case', price:150},
  {name:'Huntsman Case', price:300},
  {name:'Operation Bravo', price:1000}
];

/* DROPS (RTP ~70%) */
const rewards = [
  {name:'P90 | Sand Spray', rarity:'common', chance:55},
  {name:'USP-S | Forest Leaves', rarity:'common', chance:20},
  {name:'AK-47 | Redline', rarity:'rare', chance:15},
  {name:'M4A4 | Howl', rarity:'epic', chance:8},
  {name:'AWP | Dragon Lore', rarity:'legendary', chance:2}
];
function getReward(){
  let roll=Math.random()*100, sum=0;
  for(const r of rewards){ sum+=r.chance; if(roll<=sum) return r; }
}

/* UI CASES */
const container=document.getElementById('casesContainer');
cases.forEach(c=>{
  const d=document.createElement('div');
  d.className='case';
  d.innerHTML=`<div>${c.name}</div><div>üí∞ ${c.price}</div>`;
  d.onclick=()=>openCase(c);
  container.appendChild(d);
});

/* ROULETTE */
const overlay=document.getElementById('overlay');
const track=document.getElementById('rouletteTrack');
const resultDiv=document.getElementById('result');
const title=document.getElementById('caseTitle');
const spinSound=document.getElementById('spinSound');
const dropSound=document.getElementById('dropSound');

function generateRoulette(){
  track.innerHTML='';
  for(let i=0;i<36;i++){
    const r=rewards[Math.floor(Math.random()*rewards.length)];
    const it=document.createElement('div');
    it.className='roulette-item '+r.rarity;
    it.textContent=r.name;
    track.appendChild(it);
  }
}

function openCase(caseObj){
  if(balance<caseObj.price){ tg.showAlert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç üí∏'); return; }
  balance-=caseObj.price; updateBalance();

  title.textContent=caseObj.name;
  resultDiv.textContent='';
  overlay.style.display='flex';

  generateRoulette();
  track.style.transition='none'; track.style.left='0';

  spinSound.currentTime=0; spinSound.play();
  const offset=Math.floor(Math.random()*1200)+500;

  setTimeout(()=>{
    track.style.transition='left 3.2s cubic-bezier(0.08,0.9,0.18,1)';
    track.style.left=`-${offset}px`;
  },80);

  setTimeout(()=>{
    const reward=getReward();
    dropSound.currentTime=0; dropSound.play();
    resultDiv.classList.add('shake');
    resultDiv.innerHTML=`<span class="${reward.rarity}">${reward.name}</span>`;
    setTimeout(()=>resultDiv.classList.remove('shake'),500);
  },3300);
}

function closeRoulette(){ overlay.style.display='none'; }

/* TOPUP (stub) */
function topUp(){ tg.showAlert('–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–∏–º –ø–æ–∑–∂–µ üí≥'); }
</script>

</body>
</html>