<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>CS:GO –ö–µ–π—Å—ã</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root{--accent:#f39c12}
*{box-sizing:border-box}
body{
  margin:0;font-family:Arial,sans-serif;color:#fff;text-align:center;
  background:radial-gradient(circle at top,#2c3e50,#0f1419);
  padding-top:110px;
}
h1{color:var(--accent);margin:6px 0}
h2{margin:10px 0}

#topBar{
  position:fixed;top:10px;left:10px;right:10px;z-index:10;
  display:flex;justify-content:space-between;align-items:center;gap:8px;
}
#leftTop{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
#balance{color:#2ecc71;font-weight:bold}
#online{color:#1e90ff;font-size:.9em}

button{
  background:linear-gradient(135deg,#f39c12,#e67e22);
  border:none;border-radius:12px;padding:10px 16px;
  cursor:pointer;font-weight:bold;
}
button.small{padding:6px 10px;font-size:.85em}
button.ghost{background:#1f2a35;color:#fff}
button[disabled]{opacity:.5}

.section{
  width:min(94vw,560px);margin:14px auto;padding:14px;
  background:#121820;border-radius:18px;
}

/* CASES */
.case{
  background:#1c2630;border-radius:16px;padding:14px;margin:10px 0;
  display:flex;justify-content:space-between;align-items:center;
  cursor:pointer;transition:.2s;
}
.case:hover{transform:scale(1.03)}
.case small{opacity:.8}

/* LISTS */
.list{font-size:.85em;text-align:left;max-height:140px;overflow:auto}
.list div{padding:6px 0;border-bottom:1px solid #1f2a35}

/* INVENTORY */
.inv-item{
  display:flex;align-items:center;justify-content:space-between;
  gap:8px;padding:8px;border-bottom:1px solid #1f2a35
}
.inv-item img{width:56px;height:38px;object-fit:contain}

/* OVERLAY / MODAL */
#overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.9);
  display:none;align-items:center;justify-content:center;z-index:100;
}
#modal{
  width:min(95vw,560px);background:#121820;border-radius:20px;padding:16px;
}

/* ROULETTE */
.roulette{height:120px;overflow:hidden;border:2px solid var(--accent);
  border-radius:14px;margin:10px 0;position:relative}
.roulette::after{
  content:'';position:absolute;left:50%;top:0;width:2px;height:100%;
  background:var(--accent);box-shadow:0 0 10px var(--accent);
}
.track{display:flex;position:relative;left:0}
.item{min-width:120px;font-size:.7em}
.item img{width:80px;height:55px;object-fit:contain}

/* RESULT */
#rewardImg{width:180px;margin:8px auto;display:none}
.common{color:#fff}
.rare{color:#1e90ff}
.epic{color:#a020f0;text-shadow:0 0 12px rgba(160,32,240,.6)}
.legendary{color:#ffa500;text-shadow:0 0 18px orange;animation:pulse 1.2s infinite alternate}
@keyframes pulse{from{transform:scale(1)}to{transform:scale(1.08)}}

/* UPGRADE */
.progress{height:10px;background:#1f2a35;border-radius:8px;overflow:hidden;margin:6px 0}
.bar{height:100%;background:#2ecc71;width:0}

/* REF */
.ref-box{
  background:#1c2630;border-radius:14px;padding:10px;margin-top:8px;
  font-size:.85em;word-break:break-all
}
</style>
</head>

<body>

<div id="topBar">
  <div id="leftTop">
    <div id="balance">–ë–∞–ª–∞–Ω—Å: 500 üí∞</div>
    <div id="online">üü¢ –û–Ω–ª–∞–π–Ω: 128</div>
  </div>
  <div>
    <button class="small" id="bonusBtn" onclick="dailyBonus()">üéÅ</button>
    <button class="small" onclick="topUp()">‚ûï</button>
  </div>
</div>

<h1>CS:GO –ö–µ–π—Å—ã</h1>

<!-- REFERRAL -->
<div class="section">
  <h2>üë• –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h2>
  <div>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: <b id="refCount">0</b> —á–µ–ª–æ–≤–µ–∫</div>
  <div class="ref-box" id="refLink"></div>
  <button class="small" onclick="copyRef()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
  <small><br>–¢—ã –∏ –¥—Ä—É–≥ –ø–æ–ª—É—á–∏—Ç–µ –±–æ–Ω—É—Å üí∞</small>
</div>

<!-- CASES -->
<div class="section">
  <h2>–ö–µ–π—Å—ã</h2>
  <div id="cases"></div>
</div>

<!-- INVENTORY -->
<div class="section">
  <h2>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
  <div id="inventory" class="list"></div>
</div>

<!-- MODAL -->
<div id="overlay">
  <div id="modal">
    <h2 id="caseTitle"></h2>
    <div class="roulette"><div id="track" class="track"></div></div>
    <img id="rewardImg">
    <div id="result"></div>
    <button class="ghost" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
const tg=Telegram.WebApp; tg.ready(); tg.expand();

/* ===== USER ID ===== */
const userId = tg.initDataUnsafe?.user?.id || Math.floor(Math.random()*1e9);

/* ===== BALANCE ===== */
let balance = Number(localStorage.getItem('balance')) || 500;
const balEl=document.getElementById('balance');
function updateBalance(){
  balEl.textContent=`–ë–∞–ª–∞–Ω—Å: ${balance} üí∞`;
  localStorage.setItem('balance', balance);
}
updateBalance();

/* ===== ONLINE ===== */
const onlineEl=document.getElementById('online');
setInterval(()=>onlineEl.textContent='üü¢ –û–Ω–ª–∞–π–Ω: '+(120+Math.floor(Math.random()*40)),12000);

/* ===== REFERRALS ===== */
let refCount = Number(localStorage.getItem('refCount')) || 0;
document.getElementById('refCount').textContent = refCount;

const botName = 'YOUR_BOT_NAME'; // ‚Üê –ó–ê–ú–ï–ù–ò
const refLink = `https://t.me/${botName}?start=ref_${userId}`;
document.getElementById('refLink').textContent = refLink;

function copyRef(){
  navigator.clipboard.writeText(refLink);
  tg.showAlert('–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞');
}

/* check incoming ref */
const startParam = tg.initDataUnsafe?.start_param;
if(startParam && startParam.startsWith('ref_')){
  const inviter = startParam.replace('ref_','');
  if(!localStorage.getItem('refUsed')){
    balance += 200; // –±–æ–Ω—É—Å –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω–æ–º—É
    updateBalance();
    localStorage.setItem('refUsed', inviter);
    tg.showAlert('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ë–æ–Ω—É—Å +200 üí∞');
  }
}

/* ===== DATA ===== */
const casesData=[
 {name:'Budget Case',price:20},
 {name:'Classic Case',price:100},
 {name:'Premium Case',price:400}
];

const rewards=[
 {name:'P90 | Sand Spray',rarity:'common',chance:40,price:10,img:'https://i.imgur.com/0Qx0lM1.png'},
 {name:'AK-47 | Redline',rarity:'rare',chance:25,price:80,img:'https://i.imgur.com/HZp7QpB.png'},
 {name:'M4A4 | Howl',rarity:'epic',chance:20,price:220,img:'https://i.imgur.com/ME7YZ6m.png'},
 {name:'AWP | Dragon Lore',rarity:'legendary',chance:15,price:600,img:'https://i.imgur.com/UhU5M1O.png'}
];

function getReward(){
 let r=Math.random()*100,s=0;
 for(const i of rewards){s+=i.chance;if(r<=s)return i;}
}

/* ===== CASES ===== */
const casesEl=document.getElementById('cases');
casesData.forEach(c=>{
 const d=document.createElement('div');
 d.className='case';
 d.innerHTML=`<div>${c.name}</div><div>üí∞ ${c.price}</div>`;
 d.onclick=()=>openCase(c);
 casesEl.appendChild(d);
});

/* ===== ROULETTE ===== */
const overlay=document.getElementById('overlay');
const track=document.getElementById('track');
const resultEl=document.getElementById('result');
const rewardImg=document.getElementById('rewardImg');
const titleEl=document.getElementById('caseTitle');

function openCase(c){
 if(balance<c.price){tg.showAlert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç');return;}
 balance-=c.price;updateBalance();

 overlay.style.display='flex';
 titleEl.textContent=c.name;
 resultEl.textContent='';
 rewardImg.style.display='none';

 track.innerHTML='';
 for(let i=0;i<30;i++){
  const r=rewards[Math.floor(Math.random()*rewards.length)];
  const it=document.createElement('div');
  it.className='item '+r.rarity;
  it.innerHTML=`<img src="${r.img}"><div>${r.name}</div>`;
  track.appendChild(it);
 }
 track.style.transition='none'; track.style.left='0';

 const offset=600+Math.random()*900;
 setTimeout(()=>{
  track.style.transition='left 3s cubic-bezier(.1,.9,.2,1)';
  track.style.left=`-${offset}px`;
 },50);

 setTimeout(()=>{
  const r=getReward();
  rewardImg.src=r.img; rewardImg.style.display='block';
  resultEl.className=r.rarity; resultEl.textContent=r.name;
 },3200);
}

function closeModal(){overlay.style.display='none'}
function dailyBonus(){balance+=150;updateBalance();tg.showAlert('+150 üí∞')}
function topUp(){tg.showAlert('–ü–ª–∞—Ç–µ–∂–∏ –ø–æ–¥–∫–ª—é—á–∏–º –ø–æ–∑–∂–µ üí≥')}
</script>

</body>
</html>