<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Case Hunters</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0b0f14;
  color:#fff;
  padding-top:110px
}
#topBar{
  position:fixed;
  top:0;left:0;right:0;
  background:#020617;
  padding:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 4px 20px rgba(0,0,0,.6);
  z-index:10
}
#logo{
  font-family:'Russo One',sans-serif;
  font-size:22px;
  color:#facc15
}
#balanceBox{
  padding:8px 14px;
  border-radius:14px;
  background:linear-gradient(135deg,#facc15,#eab308);
  color:#020617;
  font-weight:bold;
  box-shadow:0 0 15px rgba(250,204,21,.6)
}
button{
  background:#facc15;
  border:none;
  border-radius:10px;
  padding:8px 14px;
  font-weight:bold;
  cursor:pointer
}
.section{
  background:#111827;
  border-radius:16px;
  padding:14px;
  margin:12px auto;
  width:min(96vw,560px)
}
.case,.item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#1f2937;
  border-radius:12px;
  padding:10px;
  margin:8px 0;
  cursor:pointer
}
.case:hover{background:#374151}
.case img,.item img{width:52px;border-radius:8px}
.small{font-size:12px;opacity:.7}
.selected{outline:2px solid #facc15}

.roulette{
  overflow:hidden;
  border:2px solid #facc15;
  border-radius:12px;
  height:90px;
  margin:10px 0
}
.track{
  display:flex;
  position:relative;
  left:0;
  transition:left 6s cubic-bezier(.05,.8,0,1)
}
.track div{min-width:90px;margin:0 4px}

#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:20
}
#modal{
  background:#020617;
  border-radius:18px;
  padding:16px;
  width:min(95vw,520px)
}
</style>
</head>

<body>

<div id="topBar">
  <div id="logo">CASE HUNTERS</div>
  <div style="display:flex;gap:8px;align-items:center">
    <div id="balanceBox">üí∞ <span id="balance">500</span> ü™ô</div>
    <button onclick="openDeposit()">‚ûï</button>
    <button onclick="openWithdraw()">‚ûñ</button>
  </div>
</div>

<div class="section">
<h3>üì¶ –ö–µ–π—Å—ã</h3>
<div id="cases"></div>
</div>

<div class="section">
<h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
<div id="inventory"></div>
<button onclick="sell()">–ü—Ä–æ–¥–∞—Ç—å</button>
</div>

<div class="section">
<h3>‚¨ÜÔ∏è –ê–ø–≥—Ä–µ–π–¥</h3>
<div id="upgradeText" class="small">–í—ã–±–µ—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç</div>
<button onclick="upgrade()">–ê–ø–≥—Ä–µ–π–¥–∏—Ç—å</button>
</div>

<div id="overlay">
<div id="modal">
<h3 id="caseTitle"></h3>
<div class="roulette"><div id="track" class="track"></div></div>
<button onclick="spin()">üé∞ –û—Ç–∫—Ä—ã—Ç—å</button>
<button onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
</div>

<script>
Telegram.WebApp.ready();
Telegram.WebApp.expand();

/* BALANCE */
let balance=+localStorage.bal||500;
const balEl=document.getElementById('balance');
function upd(){balEl.textContent=balance;localStorage.bal=balance}
upd();

/* IMAGES (EMBEDDED) */
const IMG_CASE="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHJ4PSIxMiIgZmlsbD0iI2ZhY2MxNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGV4dCB4PSIzMiIgeT0iMzgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiMwMjA2MTciPkNBU0U8L3RleHQ+PC9zdmc+";
const IMG_ITEM=IMG_CASE;

/* ITEMS */
const items=[
 {name:'Glock-18 | Fade',price:20,img:IMG_ITEM},
 {name:'USP-S | Kill Confirmed',price:35,img:IMG_ITEM},
 {name:'AK-47 | Redline',price:60,img:IMG_ITEM},
 {name:'AWP | Asiimov',price:90,img:IMG_ITEM}
];

/* CASES */
const cases=[
 {name:'Case 50',price:50,rtp:.98},
 {name:'Case 100',price:100,rtp:.97},
 {name:'Case 150',price:150,rtp:.96},
 {name:'Case 200',price:200,rtp:.95},
 {name:'Case 250',price:250,rtp:.95}
];

const casesEl=document.getElementById('cases');
cases.forEach(c=>{
 const d=document.createElement('div');
 d.className='case';
 d.innerHTML=`<img src="${IMG_CASE}"><div>${c.name}<div class="small">RTP ${Math.round(c.rtp*100)}%</div></div><div>${c.price} ü™ô</div>`;
 d.onclick=()=>openCase(c);
 casesEl.appendChild(d);
});

/* INVENTORY */
let inv=[],sel=null;
const invEl=document.getElementById('inventory');
function drawInv(){
 invEl.innerHTML='';
 inv.forEach((i,idx)=>{
  const d=document.createElement('div');
  d.className='item'+(sel===idx?' selected':'');
  d.innerHTML=`<img src="${i.img}">${i.name}<div>${i.price} ü™ô</div>`;
  d.onclick=()=>{sel=idx;upgradeText.textContent=i.name;drawInv()};
  invEl.appendChild(d);
 });
}

/* CASE OPEN */
let curCase,winItem;
function openCase(c){
 curCase=c;
 caseTitle.textContent=c.name;
 track.innerHTML='';
 winItem=Math.random()<c.rtp?items[Math.floor(Math.random()*items.length)]:null;
 for(let i=0;i<20;i++){
  track.innerHTML+=`<div><img src="${IMG_ITEM}" width="60"></div>`;
 }
 overlay.style.display='flex';
}
function spin(){
 if(balance<curCase.price)return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤');
 balance-=curCase.price;upd();
 track.style.left='-720px';
 setTimeout(()=>{
  if(winItem) inv.push(winItem);
  drawInv();
  closeModal();
  track.style.left='0';
 },6000);
}
function closeModal(){overlay.style.display='none'}

/* SELL */
function sell(){
 if(sel==null)return;
 balance+=inv[sel].price;
 inv.splice(sel,1);sel=null;upd();drawInv();
}

/* UPGRADE */
function upgrade(){
 if(sel==null)return alert('–í—ã–±–µ—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç');
 const item=inv[sel];
 const chance=item.price/300;
 if(Math.random()<chance){
  const better=items.filter(i=>i.price>item.price);
  inv[sel]=better[Math.floor(Math.random()*better.length)];
 }else{
  inv.splice(sel,1);
 }
 sel=null;upgradeText.textContent='–í—ã–±–µ—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç';drawInv();
}

/* DEMO */
function openDeposit(){alert('–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (–¥–µ–º–æ)')}
function openWithdraw(){alert('–í—ã–≤–æ–¥ (–¥–µ–º–æ)')}
</script>

</body>
</html>