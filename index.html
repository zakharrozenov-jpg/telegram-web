<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Case Hunters</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:Arial;background:#0b0f14;color:#fff;padding-top:110px}
#topBar{position:fixed;top:0;left:0;right:0;background:#020617;padding:14px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px rgba(0,0,0,.6)}
#logo{font-family:'Russo One',sans-serif;font-size:22px;color:#facc15;cursor:pointer}
button{background:#facc15;border:none;border-radius:10px;padding:8px 14px;font-weight:bold;cursor:pointer}
.section{background:#111827;border-radius:16px;padding:14px;margin:12px auto;width:min(96vw,560px)}
.case,.item,.chatMsg{display:flex;justify-content:space-between;align-items:center;background:#1f2937;border-radius:12px;padding:10px;margin:8px 0;cursor:pointer}
.case img,.item img{width:52px}
.selected{outline:2px solid #facc15}
.small{font-size:12px;opacity:.7}
.roulette{overflow:hidden;border:2px solid #facc15;border-radius:12px;height:90px}
.track{display:flex;position:relative;left:0;transition:left 6s cubic-bezier(.05,.8,0,1)}
.track div{min-width:90px;margin:0 4px}
#overlay,#adminPanel{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;align-items:center;justify-content:center}
#modal,#adminBox{background:#020617;border-radius:18px;padding:16px;width:min(95vw,520px)}
.log{font-size:12px;border-bottom:1px solid #1f2937;padding:4px 0}
</style>
</head>

<body>

<div id="topBar">
  <div id="logo">CASE HUNTERS</div>
  <div>
    –ë–∞–ª–∞–Ω—Å: <b><span id="balance">0</span></b> ü™ô
    <button onclick="alert('–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ')">‚ûï</button>
    <button onclick="openWithdraw()">üí∏</button>
  </div>
</div>

<div class="section">
<h3>üì¶ –ö–µ–π—Å—ã</h3>
<div id="cases"></div>
</div>

<div class="section">
<h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
<div id="inventory"></div>
<button onclick="sell()">–ü—Ä–æ–¥–∞—Ç—å</button>
</div>

<div class="section">
<h3>üí¨ –ß–∞—Ç</h3>
<div id="chat"></div>
</div>

<div id="overlay">
<div id="modal">
<h3 id="caseTitle"></h3>
<div class="roulette"><div id="track" class="track"></div></div>
<button id="spinBtn" onclick="spin()">üé∞ –û—Ç–∫—Ä—ã—Ç—å</button>
<button onclick="overlay.style.display='none'">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
</div>

<!-- ADMIN -->
<div id="adminPanel">
<div id="adminBox">
<h3>üëë –ê–¥–º–∏–Ω–∫–∞</h3>
<div>–ë–∞–ª–∞–Ω—Å –∏–≥—Ä–æ–∫–∞: <b id="adminBal"></b></div><br>
<button onclick="adminAdd()">‚ûï100</button>
<button onclick="adminSub()">‚ûñ100</button>
<h4>–õ–æ–≥–∏</h4>
<div id="logs"></div>
<button onclick="adminPanel.style.display='none'">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
</div>

<script>
const tg=Telegram.WebApp;tg.ready();tg.expand();

/* ADMIN */
const ADMIN_ID = 123456789;
const userId = tg.initDataUnsafe?.user?.id || localStorage.uid || Math.floor(Math.random()*1e9);
localStorage.uid=userId;
const isAdmin = userId === ADMIN_ID;

/* LOGS */
let logs=JSON.parse(localStorage.logs||'[]');
function addLog(t){logs.push(t);localStorage.logs=JSON.stringify(logs);}

/* BALANCE */
let balance=+localStorage.bal||500;
const balEl=document.getElementById('balance');
function upd(){balEl.textContent=balance;localStorage.bal=balance}
upd();

/* DATA */
const items=[
 {name:'AK-47 | Redline',price:180,img:'https://steamcdn-a.akamaihd.net/apps/730/icons/econ/default_generated/weapon_ak47_cu_ak47_redline_light_large.png'},
 {name:'AWP | Asiimov',price:420,img:'https://steamcdn-a.akamaihd.net/apps/730/icons/econ/default_generated/weapon_awp_cu_awp_asiimov_light_large.png'},
 {name:'Glock-18 | Fade',price:220,img:'https://steamcdn-a.akamaihd.net/apps/730/icons/econ/default_generated/weapon_glock_cu_glock18_fade_light_large.png'}
];
const cases=[
 {name:'Bronze',price:100,rtp:.68},
 {name:'Silver',price:200,rtp:.6},
 {name:'Gold',price:250,rtp:.55}
];

/* INVENTORY */
let inv=[],sel=null;
const invEl=document.getElementById('inventory');
function drawInv(){
 invEl.innerHTML='';
 inv.forEach((i,idx)=>{
  const d=document.createElement('div');
  d.className='item'+(sel===idx?' selected':'');
  d.innerHTML=`<img src="${i.img}">${i.name}<div>${i.price}</div>`;
  d.onclick=()=>{sel=idx;drawInv()};
  invEl.appendChild(d);
 });
}

/* CASES */
let busy=false;
const casesEl=document.getElementById('cases');
cases.forEach(c=>{
 const d=document.createElement('div');
 d.className='case';
 d.innerHTML=`<div>${c.name}<div class="small">${c.price} ü™ô</div></div><div>RTP ${c.rtp*100}%</div>`;
 d.onclick=()=>!busy&&openCase(c);
 casesEl.appendChild(d);
});

/* CASE OPEN */
let curCase,winItem;
function openCase(c){
 curCase=c;
 caseTitle.textContent=c.name;
 track.innerHTML='';
 winItem=Math.random()<c.rtp?items[Math.floor(Math.random()*items.length)]:null;
 for(let i=0;i<20;i++){
  const it=items[Math.floor(Math.random()*items.length)];
  track.innerHTML+=`<div><img src="${it.img}" width="60"></div>`;
 }
 overlay.style.display='flex';
}
function spin(){
 if(busy)return;
 if(balance<curCase.price)return alert('–ù–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤');
 busy=true;
 spinBtn.disabled=true;
 balance-=curCase.price;upd();
 addLog(`OPEN ${curCase.name} -${curCase.price}`);
 track.style.left='-720px';
 setTimeout(()=>{
  if(winItem){inv.push(winItem);addLog(`WIN ${winItem.name}`);}
  drawInv();
  overlay.style.display='none';
  track.style.left='0';
  busy=false;
  spinBtn.disabled=false;
 },6000);
}

/* SELL */
function sell(){
 if(sel==null)return;
 balance+=inv[sel].price;
 addLog(`SELL ${inv[sel].name}`);
 inv.splice(sel,1);sel=null;upd();drawInv();
}

/* CHAT */
const chat=document.getElementById('chat');
function chatMsg(t){chat.innerHTML+=`<div class="chatMsg">${t}</div>`;chat.scrollTop=9999}

/* ADMIN OPEN */
let tap=0;
logo.onclick=()=>{
 tap++;
 if(tap>=5 && isAdmin){
  adminPanel.style.display='flex';
  adminBal.textContent=balance;
  logsDiv.innerHTML=logs.map(l=>`<div class="log">${l}</div>`).join('');
 }
}

/* ADMIN ACTIONS */
const logsDiv=document.getElementById('logs');
function adminAdd(){balance+=100;upd();addLog('ADMIN +100')}
function adminSub(){balance-=100;upd();addLog('ADMIN -100')}
function openWithdraw(){alert('–í—ã–≤–æ–¥ —Å–∫–æ—Ä–æ')}
</script>

</body>
</html>